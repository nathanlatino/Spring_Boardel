<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="fragments/fragments.html :: header" lang="en"/>

<body>

<div th:replace="fragments/fragments.html :: navigation"></div>

<div class="box" style="margin-right: 10%;margin-left: 10%;">

    <form th:action="@{/boards/__${board.id}__}">
        <h1 class="display-3 text-center" th:text="${board.name}">Default name</h1>
        <div class="field">
            <input name="search" type="text" class="input" id="searchContent" placeholder="Search" required>
        </div>
        <button type="submit" class="button">Search</button>
    </form>
    <table class="table is-hoverable is-striped is-centered text-centered is-fullwidth">
        <thead>
        <tr>
            <th>Name</th>
            <th>Last Modified</th>
            <th><a class="float-right" th:href="'/posts/create?boardId=' +  ${board.id}">+</a></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="post, iterStat: ${posts}" th:onclick="'window.location.href=\'/posts/'+ ${post.id} + '\''">

            <td th:text="${post.name}">Default name</td>
            <td th:text="${dates[iterStat.index]}">Default date</td>
            <td class="text-right">
                <div sec:authorize="isAuthenticated()">
                    <form method="post" th:action="@{/posts/delete}"
                          th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')') || #authorization.expression('hasRole(''ROLE_MODO'')') || currentUser.equals(post.user)}">
                        <input type="hidden" th:name="post" th:value="${post.id}">
                        <button type="submit" class="button">-</i>
                        </button>
                    </form>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="tile">
        <div class="has-text-center tile"><a th:class="${posts.number != 0} ? '' : 'disabled'"
                                        th:href="@{__${pageUrl}__&page=__${0}__}"><i
                class="pageChanger fas fa-angle-double-left"></i></a></div>
        <div class="has-text-center tile"><a th:class="${posts.number > 0} ? '' : 'disabled'"
                                             th:href="@{__${pageUrl}__&page=__${posts.number - 1}__}"><i
                class="pageChanger fas fa-angle-left"></i></a></div>
        <div class="has-text-center tile"><a th:class="${posts.number < posts.totalPages -1 } ? '' : 'disabled'"
                                             th:href="@{__${pageUrl}__&page=__${posts.number + 1}__}"><i
                class="pageChanger fas fa-angle-right"></i></a></div>
        <div class="has-text-center tile"><a
                th:class="${posts.number != (posts.totalPages==0 ? posts.totalPages : posts.totalPages - 1)} ? '' : 'disabled'"
                th:href="@{__${pageUrl}__&page=__${posts.totalPages==0 ? posts.totalPages : posts.totalPages - 1}__}"><i
                class="pageChanger fas fa-angle-double-right"></i></a></div>
    </div>
</div>


<div th:replace="fragments/fragments.html :: scripts"></div>
</body>
</html>
